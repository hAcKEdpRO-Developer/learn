/* 
Develop by ครูโต้ง | hAcKEdpRO Pongwattana Suebsing
Edit by 2025-10-24 00:00:00
จำนวน {LINE_COUNT} บรรทัด
*/
(function (g) {
  // มินิ jQuery ที่รองรับ $(function(){}) และ selector หลายแบบ
  function wrap(nodes) {
	// ปกติให้เป็น array ของ node
	var arr = nodes
	  ? nodes instanceof NodeList
		? Array.prototype.slice.call(nodes)
		: nodes instanceof Array
		? nodes
		: [nodes]
	  : [];
	return new MiniJQ(arr);
  }

  function MiniJQ(els) {
	this.el = els;
  }

  MiniJQ.prototype.on = function (ev, cb) {
	this.el.forEach(function (e) {
	  if (e && e.addEventListener) e.addEventListener(ev, cb);
	});
	return this;
  };

  MiniJQ.prototype.val = function (v) {
	if (v === undefined) {
	  return this.el[0] && "value" in this.el[0] ? this.el[0].value : undefined;
	}
	this.el.forEach(function (e) {
	  if (e && "value" in e) e.value = v;
	});
	return this;
  };

  MiniJQ.prototype.serialize = function () {
	if (!this.el[0]) return "";
	var fd = new FormData(this.el[0]);
	return new URLSearchParams(fd).toString();
  };

  MiniJQ.prototype.html = function (h) {
	this.el.forEach(function (e) {
	  if (e) e.innerHTML = h;
	});
	return this;
  };

  MiniJQ.prototype.append = function (h) {
	this.el.forEach(function (e) {
	  if (e) e.insertAdjacentHTML("beforeend", h);
	});
	return this;
  };

  MiniJQ.prototype.text = function (t) {
	this.el.forEach(function (e) {
	  if (e) e.textContent = t;
	});
	return this;
  };

  MiniJQ.prototype.attr = function (k, v) {
	if (v === undefined) {
	  return this.el[0] ? this.el[0].getAttribute(k) : undefined;
	}
	this.el.forEach(function (e) {
	  if (e) e.setAttribute(k, v);
	});
	return this;
  };

  function $(sel) {
	// รองรับ $(function(){}) = DOM ready
	if (typeof sel === "function") {
	  if (document.readyState === "loading") {
		document.addEventListener("DOMContentLoaded", sel);
	  } else {
		sel();
	  }
	  // คืนวัตถุที่มี el เป็น document เพื่อ chain ได้ (แต่ไม่บังคับใช้)
	  return wrap(document);
	}

	// รองรับ element / window / document / NodeList / Array ของ elements
	if (sel === window || sel === document) return wrap(sel);
	if (sel instanceof Element) return wrap(sel);
	if (sel instanceof NodeList || sel instanceof Array) return wrap(sel);

	// ถ้าเป็น selector string ปกติ
	if (typeof sel === "string") return wrap(document.querySelectorAll(sel));

	// fallback
	return wrap([]);
  }

  // AJAX helpers
  $.getJSON = function (url, cb) {
	fetch(url, { credentials: "same-origin" })
	  .then(function (r) {
		return r.js
